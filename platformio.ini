; ===========================================================================
; ESP32-KORVO V1.1 (ESP32-WROVER-E com ESP32-D0WD-V3, 8MB PSRAM)
; ===========================================================================
[env:esp32-korvo-v1_1]
platform = espressif32
framework = arduino
board = esp-wrover-kit
monitor_speed = 115200
upload_speed = 921600

board_build.partitions = huge_app.csv

; PSRAM Configuration - ESSENTIAL FLAGS
build_flags =
    -D BOARD_ESP32_KORVO_V1_1
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DCORE_DEBUG_LEVEL=1

board_build.f_cpu = 240000000L

; Flash mode - ensure proper boot without USB
board_build.flash_mode = dio
board_build.f_flash = 80000000L

lib_deps =
    fastled/FastLED @ ^3.5.0
    tzapu/WiFiManager @ ^2.0.17
    bblanchon/ArduinoJson @ ^6.21.3
    links2004/WebSockets @ ^2.4.1

; ===========================================================================
; PSRAM Test Environment
; ===========================================================================
[env:psram-test]
platform = espressif32
framework = arduino
board = esp-wrover-kit
monitor_speed = 115200
upload_speed = 921600

build_src_filter = +<../test_psram.cpp>

; PSRAM flags for test
build_flags =
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DCORE_DEBUG_LEVEL=3
